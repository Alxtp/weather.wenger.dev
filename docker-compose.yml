version: "1.0"

services:
  weewx:
    image: thrawn.home:5000/weewx:0.0.10
    container_name: weewx
    volumes:
      - weewx-db:/home/weewx/archive
      - weewx-html:/home/weewx/public_html

    restart: unless-stopped
    devices:
      - /dev/VantageUSB:/dev/ttyUSB0
  nginx:
    container_name: weewx-nginx
    image: nginx:latest
    depends_on:
      - weewx
    volumes:
      - weewx-html:/usr/share/nginx/html
  mosquitto:
    container_name: weewx-mosquitto
    image: thrawn.home:5000/mosquitto:0.0.1

volumes:
  weewx-db:
  weewx-html:

networks:
  default:
    external: true
    name: private
